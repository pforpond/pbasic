<!DOCTYPE html>
<html lang="en-US">

  
<!-- Mirrored from qb64.com/wiki/Text-Using-Graphics.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 07 Nov 2024 13:50:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.html">
    <link rel="stylesheet" type="text/css" media="screen" href="../assets/css/style2443.css?v=eb9b8c9cad488bd1304035e1bfc5d2e89b0f78df">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>QB64.com | QB64 is a modern extended BASIC programming language that retains QBasic/QuickBASIC 4.5 compatibility and compiles native binaries for Windows, Linux, and macOS.</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="QB64.com" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="QB64 is a modern extended BASIC programming language that retains QBasic/QuickBASIC 4.5 compatibility and compiles native binaries for Windows, Linux, and macOS." />
<meta property="og:description" content="QB64 is a modern extended BASIC programming language that retains QBasic/QuickBASIC 4.5 compatibility and compiles native binaries for Windows, Linux, and macOS." />
<link rel="canonical" href="Text-Using-Graphics-2.html" />
<meta property="og:url" content="Text-Using-Graphics-2.html" />
<meta property="og:site_name" content="QB64.com" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="QB64.com" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"QB64 is a modern extended BASIC programming language that retains QBasic/QuickBASIC 4.5 compatibility and compiles native binaries for Windows, Linux, and macOS.","headline":"QB64.com","url":"https://qb64.com/wiki/Text-Using-Graphics.html"}</script>
<!-- End Jekyll SEO tag -->

    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          
            <!--<a id="forkme_banner" href="https://github.com/DualBrain/QB64">View on GitHub</a>-->
          

          <h1 id="project_title">QB64.com</h1>
          <h2 id="project_tagline">QB64 is a modern extended BASIC programming language that retains QBasic/QuickBASIC 4.5 compatibility and compiles native binaries for Windows, Linux, and macOS.</h2>

          
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>While QB64 offers <a href="_FONT.html">_FONT</a> and <a href="Unicode.html">Unicode</a> text options, QBasic was limited in what it could offer. This shortfall could be overcome in various ways including using sprite pictures. Thanks to QB64, we can have the best in both worlds without creating them yourself!</p>

<blockquote>
  <p>1) The characters can be loaded in a file for QBasic.
2) Text fonts can be sized without re-loading them.
3) Data files are smaller than <a href="BSAVE.html">BSAVE</a> image files.
4} Proper character spacing is already done for you.</p>
</blockquote>

<h2 id="bit-packing-pixel-data">Bit Packing Pixel Data</h2>

<p>In QBasic, text blocks were always 8 pixels wide no matter what screen mode was used. This allowed the total data value of a row to be set by reading 8 pixels using <a href="POINT.html">POINT</a>. The value can be stored in one <a href="_BYTE.html">_BYTE</a>(8 bits) of data using <a href="ASCII.html">ASCII</a> string characters.</p>

<p><sub>Qbasic concept by Artelius</sub></p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
SCREEN 12             'text characters are 8 X 16 pixel blocks
DIM SHARED Char(0 TO 255, 0 TO 15) AS STRING * 1  'store data by character row byte values
TextSave                     'call to SUB at start of program

SUB TextSave
OUT &amp;H3C8, 1: OUT &amp;H3C9, 0: OUT &amp;H3C9, 0: OUT &amp;H3C9, 0 'print text as background color
COLOR 1 'hide the character printing
FOR ascii% = 0 TO 255 'Draw map of each character
   IF ascii% = 7 THEN ascii% = 8              'eliminate beep character sound when printed
   LOCATE 1, 1: PRINT CHR$(ascii%)            'PRINT ASCII characters to top left corner
   FOR row% = 0 TO 15                         'read 16 row byte values
      byte = 0                                'reset value every row
      FOR col% = 7 TO 0 STEP -1               'read 8 pixels from right to left
         byte = byte * 2 - (POINT(col%, row%) &gt; 0)  'bit-packing with 2 ^ bit
      NEXT
      Char(ascii%, row%) = CHR$(byte)         'convert row byte value to ASCII character
   NEXT
   LOCATE CSRLIN, POS(0) - 1: PRINT SPACE$(1) 'erase previous character anywhere
NEXT
PALETTE  'restore all palette colors
END SUB 

</code></pre></div></div>

<blockquote>
  <p>Above <a href="ASCII.html">ASCII</a> Characters 7, 9, 10, 11, 12, 13, 28, 29, 30, and 31 won’t print in QBasic! <strong>QB64</strong> can print them with <a href="_PRINTSTRING.html">_PRINTSTRING</a> or by using <a href="PRINT.html">PRINT</a> after <a href="_CONTROLCHR.html">_CONTROLCHR</a> OFF is set.</p>
</blockquote>

<p><strong>Bit Packing</strong></p>

<div class="language-vb highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
  <span class="n">FOR</span> <span class="n">col%</span> <span class="o">=</span> <span class="mi">7</span> <span class="n">TO</span> <span class="mi">0</span> <span class="n">STEP</span> <span class="o">-</span><span class="mi">1</span>                     <span class="c1">'read pixels from right to left</span>
      <span class="n">byte</span> <span class="o">=</span> <span class="n">byte</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="n">POINT</span><span class="p">(</span><span class="n">col%</span><span class="p">,</span> <span class="n">row%</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1">'bit-packing with 2 ^ bit</span>
  <span class="n">NEXT</span>

</code></pre></div></div>

<blockquote>
  <p>Bit packing is done by doubling the current byte value and adding one for each bit where a pixel is not colored black.</p>
</blockquote>

<blockquote>
  <p>The <a href="boolean-2.html">boolean</a> statement <code class="language-plaintext highlighter-rouge">(POINT(col%, row%) &gt; 0)</code> evaluates to -1(true) when a pixel is on or 0(false) when a pixel is off. This effectively adds 1 to the byte value. Each loop that byte value is doubled as <a href="POINT.html">POINT</a> goes from right to left. If the left-most pixel is on, it will only add one to the byte value as expected. This makes the total sum of the bit values or the byte value equal to 255 if all of the pixels are on as shown below:</p>
</blockquote>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 **               Bit\Column #:  0   1   2   3   4   5   6   7   TOTAL **
                Exponent 2 ^:  0   1   2   3   4   5   6   7
                Bit Value On:  1   2   4   8  16  32  64  128   255

</code></pre></div></div>

<blockquote>
  <p>Alpha-numeric text byte values will never be close to 255 because the first and last columns will normally be 0 as they are used to space text characters. Some characters, such as <a href="CHR%24.html">CHR$</a>(219) can have byte totals of 255 and have a value every row however.</p>
</blockquote>

<h2 id="examples">Example(s)</h2>

<p><em>Example Code:</em> Displays the 16 one byte row values saved as <a href="ASCII.html">ASCII</a> characters in the <a href="STRING.html">STRING</a> array using <a href="_PRINTSTRING.html">_PRINTSTRING</a>.</p>

<div class="language-vb highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">SCREEN</span> <span class="mi">12</span> <span class="c1">'text characters are 8 X 16 pixel blocks</span>
<span class="n">DIM</span> <span class="n">SHARED</span> <span class="kt">Char</span><span class="p">(</span><span class="mi">0</span> <span class="n">TO</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">15</span><span class="p">)</span> <span class="n">AS</span> <span class="n">STRING</span> <span class="o">*</span> <span class="mi">1</span> <span class="c1">'store data by character row byte values</span>
<span class="n">TextSave</span> <span class="c1">'call to SUB at start of program</span>

<span class="n">DO</span>
  <span class="n">COLOR</span> <span class="mi">11</span><span class="p">:</span> <span class="n">LOCATE</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="n">INPUT</span> <span class="s">"Enter keypress or an ASCII code 1 to 255: "</span><span class="p">,</span> <span class="n">cod$</span>
  <span class="n">CLS</span><span class="p">:</span> <span class="n">code</span> <span class="o">=</span> <span class="n">VAL</span><span class="p">(</span><span class="n">cod$</span><span class="p">)</span>
  <span class="n">IF</span> <span class="p">(</span><span class="n">code</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="n">AND</span> <span class="n">LEN</span><span class="p">(</span><span class="n">cod$</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="n">OR</span> <span class="n">code</span> <span class="o">&gt;</span> <span class="mi">255</span> <span class="n">THEN</span> <span class="n">code</span> <span class="o">=</span> <span class="n">ASC</span><span class="p">(</span><span class="n">cod$</span><span class="p">)</span>
  <span class="n">COLOR</span> <span class="mi">14</span><span class="p">:</span> <span class="n">_PRINTSTRING</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">LTRIM</span><span class="err">$</span><span class="p">(</span><span class="n">STR</span><span class="err">$</span><span class="p">(</span><span class="n">code</span><span class="p">))</span>
  <span class="n">FOR</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">15</span>
    <span class="n">ch$</span> <span class="o">=</span> <span class="kt">Char</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
    <span class="n">_PRINTSTRING</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="mi">30</span> <span class="o">+</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">ch$</span> <span class="o">+</span> <span class="s">","</span>
  <span class="n">NEXT</span>
  <span class="n">_PRINTSTRING</span> <span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">CHR</span><span class="err">$</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="n">LOOP</span> <span class="n">UNTIL</span> <span class="n">LEN</span><span class="p">(</span><span class="n">cod$</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">END</span>

<span class="n">SUB</span> <span class="n">TextSave</span>
<span class="n">OUT</span> <span class="o">&amp;</span><span class="n">H3C8</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="n">OUT</span> <span class="o">&amp;</span><span class="n">H3C9</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="n">OUT</span> <span class="o">&amp;</span><span class="n">H3C9</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="n">OUT</span> <span class="o">&amp;</span><span class="n">H3C9</span><span class="p">,</span> <span class="mi">0</span> <span class="c1">'print text as background color</span>
<span class="n">COLOR</span> <span class="mi">1</span> <span class="c1">'hide the character printing</span>
<span class="n">FOR</span> <span class="n">ascii%</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">255</span> <span class="c1">'Draw map of each character</span>
  <span class="n">_PRINTSTRING</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">CHR</span><span class="err">$</span><span class="p">(</span><span class="n">ascii%</span><span class="p">)</span> <span class="c1">'PRINT ASCII characters to top left corner</span>
  <span class="n">FOR</span> <span class="n">row%</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">15</span> <span class="c1">'read 16 row byte values</span>
    <span class="n">byte</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">'reset value every row</span>
    <span class="n">FOR</span> <span class="n">col%</span> <span class="o">=</span> <span class="mi">7</span> <span class="n">TO</span> <span class="mi">0</span> <span class="n">STEP</span> <span class="o">-</span><span class="mi">1</span> <span class="c1">'read 8 pixels from right to left</span>
      <span class="n">byte</span> <span class="o">=</span> <span class="n">byte</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="n">POINT</span><span class="p">(</span><span class="n">col%</span><span class="p">,</span> <span class="n">row%</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">'bit-packing with 2 ^ bit</span>
    <span class="n">NEXT</span>
    <span class="kt">Char</span><span class="p">(</span><span class="n">ascii%</span><span class="p">,</span> <span class="n">row%</span><span class="p">)</span> <span class="o">=</span> <span class="n">CHR</span><span class="err">$</span><span class="p">(</span><span class="n">byte</span><span class="p">)</span> <span class="c1">'convert row byte value to ASCII character</span>
  <span class="n">NEXT</span>
<span class="n">NEXT</span>
<span class="n">PALETTE</span> <span class="c1">'restore all palette colors</span>
<span class="n">END</span> <span class="n">SUB</span>

</code></pre></div></div>

<blockquote>
  <p><em>Note:</em> <a href="ASCII.html">ASCII</a> character values of <a href="CHR%24.html">CHR$</a>(0), <a href="CHR%24.html">CHR$</a>(32) and <a href="CHR%24.html">CHR$</a>(255) will only display an empty space!</p>
</blockquote>

<blockquote>
  <p>The <a href="ASCII.html">ASCII</a> character data in the array can also be saved to a comma separated file with <a href="WRITE.html">WRITE</a> for later use. In fact, the data can be read and displayed by QBasic programs later using special <a href="_LOADFONT.html">_LOADFONT</a> or <a href="Unicode.html">Unicode</a>! Wider characters will require larger values than <a href="_BYTE.html">_BYTE</a>.</p>
</blockquote>

<h2 id="displaying-text-characters">Displaying Text Characters</h2>

<p>Once the data is saved, we need something to convert the data back into text characters. There are several ways to do this simply by using <a href="PSET.html">PSET</a> for normal sizes or <a href="CIRCLE.html">CIRCLE</a> or <a href="LINE.html">LINE</a> to amplify the displayed character sizes. Use a normal <a href="FOR...html">FOR…NEXT</a> 0 TO 7 loop to read:</p>

<p><strong><a href="ASCII.html">ASCII</a> 8 X 16 Text character size increased using <a href="CIRCLE.html">CIRCLE</a></strong></p>

<div class="language-vb highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">SCREEN</span> <span class="mi">12</span> <span class="c1">'text characters are 8 X 16 pixel blocks</span>
<span class="n">DIM</span> <span class="n">SHARED</span> <span class="kt">Char</span><span class="p">(</span><span class="mi">0</span> <span class="n">TO</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">15</span><span class="p">)</span> <span class="n">AS</span> <span class="n">STRING</span> <span class="o">*</span> <span class="mi">1</span> <span class="c1">'store data by character row byte values</span>
<span class="n">TextSave</span> <span class="c1">'call to SUB at start of program</span>

<span class="n">ch</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">'character 1</span>
<span class="n">DO</span><span class="p">:</span> <span class="n">rowy</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">COLOR</span> <span class="mi">14</span><span class="p">:</span> <span class="n">LOCATE</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">5</span>
  <span class="n">FOR</span> <span class="n">yy</span> <span class="o">=</span> <span class="mi">100</span> <span class="n">TO</span> <span class="mi">220</span> <span class="n">STEP</span> <span class="mi">8</span>
    <span class="n">rowval</span> <span class="o">=</span> <span class="n">ASC</span><span class="p">(</span><span class="kt">Char</span><span class="err">$</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="n">rowy</span><span class="p">))</span> <span class="c1">'pixel row value</span>
    <span class="n">SELECT</span> <span class="n">CASE</span> <span class="n">ch</span>
      <span class="n">CASE</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">178</span><span class="p">,</span> <span class="mi">182</span><span class="p">,</span> <span class="mi">185</span><span class="p">,</span> <span class="mi">186</span><span class="p">,</span> <span class="mi">199</span><span class="p">,</span> <span class="mi">204</span><span class="p">,</span> <span class="mi">206</span><span class="p">,</span> <span class="mi">215</span><span class="p">,</span> <span class="mi">219</span><span class="p">,</span> <span class="mi">222</span>
        <span class="n">PRINT</span> <span class="n">STR</span><span class="err">$</span><span class="p">(</span><span class="n">rowval</span><span class="p">)</span><span class="err">;</span> <span class="c1">'compact the values</span>
      <span class="n">CASE</span> <span class="n">ELSE</span><span class="p">:</span> <span class="n">PRINT</span> <span class="n">rowval</span><span class="err">;</span>
    <span class="n">END</span> <span class="n">SELECT</span>
    <span class="n">SetCHR</span> <span class="mi">25</span><span class="p">,</span> <span class="n">POS</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="n">rowval</span>
    <span class="n">colx</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">FOR</span> <span class="n">xx</span> <span class="o">=</span> <span class="mi">300</span> <span class="n">TO</span> <span class="mi">356</span> <span class="n">STEP</span> <span class="mi">8</span>   
      <span class="n">IF</span> <span class="p">(</span><span class="n">rowval</span> <span class="n">AND</span> <span class="mi">2</span> <span class="o">^</span> <span class="n">colx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="n">THEN</span>
        <span class="n">CIRCLE</span> <span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">),</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span>   <span class="c1">'display text character as full white circles</span>
        <span class="n">PAINT</span> <span class="n">STEP</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">7</span>
        <span class="c1">' LINE (xx - 4, yy - 4)-(xx + 3, yy + 3), 15, BF</span>
      <span class="n">ELSE</span><span class="p">:</span>
        <span class="n">CIRCLE</span> <span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">),</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span>   <span class="c1">'display background as full blue circles</span>
        <span class="n">PAINT</span> <span class="n">STEP</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">1</span>
        <span class="c1">'  LINE (xx - 4, yy - 4)-(xx + 3, yy + 3), 1, BF</span>
      <span class="n">END</span> <span class="n">IF</span>
      <span class="n">colx</span> <span class="o">=</span> <span class="n">colx</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">NEXT</span>
    <span class="n">_DELAY</span> <span class="p">.</span><span class="err">2</span>
    <span class="n">rowy</span> <span class="o">=</span> <span class="n">rowy</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="n">NEXT</span>
  <span class="n">LOCATE</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">40</span><span class="p">:</span> <span class="n">PRINT</span> <span class="n">SPACE</span><span class="err">$</span><span class="p">(</span><span class="mi">39</span><span class="p">)</span>
  <span class="n">LOCATE</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="n">COLOR</span> <span class="mi">13</span><span class="p">:</span> <span class="n">LINE</span> <span class="n">INPUT</span> <span class="s">"Enter ASCII code(1 to 255) or press key character (Enter quits): "</span><span class="p">,</span> <span class="n">ch$</span>
  <span class="n">LOCATE</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="n">PRINT</span> <span class="n">SPACE</span><span class="err">$</span><span class="p">(</span><span class="mi">78</span><span class="p">)</span>
  <span class="n">LOCATE</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">PRINT</span> <span class="n">SPACE</span><span class="err">$</span><span class="p">(</span><span class="mi">75</span><span class="p">)</span>
  <span class="n">LOCATE</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">PRINT</span> <span class="n">SPACE</span><span class="err">$</span><span class="p">(</span><span class="mi">75</span><span class="p">)</span>
  <span class="n">ch</span> <span class="o">=</span> <span class="n">VAL</span><span class="p">(</span><span class="n">ch$</span><span class="p">)</span>
  <span class="n">IF</span> <span class="n">ch</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">AND</span> <span class="n">LEN</span><span class="p">(</span><span class="n">ch$</span><span class="p">)</span> <span class="n">THEN</span> <span class="n">ch</span> <span class="o">=</span> <span class="n">ASC</span><span class="p">(</span><span class="n">ch$</span><span class="p">)</span>
<span class="n">LOOP</span> <span class="n">UNTIL</span> <span class="n">ch</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">OR</span> <span class="n">ch</span> <span class="o">&gt;</span> <span class="mi">255</span>
<span class="n">END</span>

<span class="n">SUB</span> <span class="n">SetCHR</span> <span class="p">(</span><span class="n">Trow</span><span class="p">,</span> <span class="n">Tcol</span><span class="p">,</span> <span class="n">FG</span><span class="p">,</span> <span class="n">ASCode</span><span class="p">)</span>    <span class="c1">'displays ASCII character value from array</span>
<span class="n">Srow</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="p">(</span><span class="n">Trow</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span> <span class="n">Scol</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">*</span> <span class="p">(</span><span class="n">Tcol</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">'convert text to graphic coordinates</span>
<span class="n">FOR</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">15</span>
  <span class="n">ybyte$</span> <span class="o">=</span> <span class="kt">Char</span><span class="err">$</span><span class="p">(</span><span class="n">ASCode</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> <span class="n">yval</span> <span class="o">=</span> <span class="n">ASC</span><span class="p">(</span><span class="n">ybyte$</span><span class="p">)</span>
  <span class="n">FOR</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">7</span>
    <span class="n">IF</span> <span class="p">(</span><span class="n">yval</span> <span class="n">AND</span> <span class="mi">2</span> <span class="o">^</span> <span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="n">THEN</span> <span class="n">PSET</span> <span class="p">(</span><span class="n">Scol</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="n">Srow</span> <span class="o">+</span> <span class="n">y</span><span class="p">),</span> <span class="n">FG</span>
  <span class="n">NEXT</span>
<span class="n">NEXT</span>
<span class="n">END</span> <span class="n">SUB</span>

<span class="n">SUB</span> <span class="n">TextSave</span>
<span class="n">OUT</span> <span class="o">&amp;</span><span class="n">H3C8</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="n">OUT</span> <span class="o">&amp;</span><span class="n">H3C9</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="n">OUT</span> <span class="o">&amp;</span><span class="n">H3C9</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="n">OUT</span> <span class="o">&amp;</span><span class="n">H3C9</span><span class="p">,</span> <span class="mi">0</span> <span class="c1">'print text as background color</span>
<span class="n">COLOR</span> <span class="mi">1</span> <span class="c1">'hide the character printing</span>
<span class="n">FOR</span> <span class="n">ascii%</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">255</span> <span class="c1">'Draw map of each character</span>
  <span class="n">_PRINTSTRING</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">CHR</span><span class="err">$</span><span class="p">(</span><span class="n">ascii%</span><span class="p">)</span> <span class="c1">'PRINT ASCII characters to top left corner</span>
  <span class="n">FOR</span> <span class="n">row%</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">15</span> <span class="c1">'read 16 row byte values</span>
    <span class="n">byte</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">'reset value every row</span>
    <span class="n">FOR</span> <span class="n">col%</span> <span class="o">=</span> <span class="mi">7</span> <span class="n">TO</span> <span class="mi">0</span> <span class="n">STEP</span> <span class="o">-</span><span class="mi">1</span> <span class="c1">'read 8 pixels from right to left</span>
      <span class="n">byte</span> <span class="o">=</span> <span class="n">byte</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="n">POINT</span><span class="p">(</span><span class="n">col%</span><span class="p">,</span> <span class="n">row%</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">'bit-packing with 2 ^ bit</span>
    <span class="n">NEXT</span>
    <span class="kt">Char</span><span class="p">(</span><span class="n">ascii%</span><span class="p">,</span> <span class="n">row%</span><span class="p">)</span> <span class="o">=</span> <span class="n">CHR</span><span class="err">$</span><span class="p">(</span><span class="n">byte</span><span class="p">)</span> <span class="c1">'convert row byte value to ASCII character</span>
  <span class="n">NEXT</span>
<span class="n">NEXT</span>
<span class="n">PALETTE</span> <span class="c1">'restore all palette colors</span>
<span class="n">END</span> <span class="n">SUB</span> 

</code></pre></div></div>
<p><sub>Code by Ted Weissgerber</sub></p>

<blockquote>
  <p>The program above shows each array <a href="_BYTE.html">_BYTE</a> character value and character. <a href="PRINT.html">PRINT</a> will not print some characters in QB64 or QB.</p>
</blockquote>

<p>Use <strong><a href="_CONTROLCHR.html">_CONTROLCHR</a> OFF</strong> to <a href="PRINT.html">PRINT</a> control characters in QB64!</p>

<p><strong><a href="ASCII.html">ASCII</a> 8 X 16 Text Character size increased using <a href="LINE.html">LINE</a></strong></p>

<div class="language-vb highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">SUB</span> <span class="n">DisplayText</span> <span class="p">(</span><span class="n">Xpos</span><span class="p">,</span> <span class="n">Ypos</span><span class="p">,</span> <span class="n">FG</span><span class="p">,</span> <span class="n">BG</span><span class="p">,</span> <span class="n">Xsize</span><span class="p">,</span> <span class="n">Ysize</span><span class="p">,</span> <span class="n">text$</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">Xpos</span><span class="p">:</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Ypos</span><span class="p">:</span> <span class="n">Xoff</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span> <span class="o">*</span> <span class="n">Xsize</span><span class="p">):</span> <span class="n">L</span> <span class="o">=</span> <span class="n">LEN</span><span class="p">(</span><span class="n">text$</span><span class="p">)</span>
<span class="n">IF</span> <span class="n">BG</span> <span class="n">THEN</span>                                 <span class="c1">'set BackGround if not 0</span>
<span class="n">LINE</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">Xsize</span><span class="p">),</span> <span class="n">y</span> <span class="o">-</span> <span class="n">Ysize</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="p">(</span><span class="n">L</span> <span class="o">*</span> <span class="n">Xoff</span><span class="p">),</span> <span class="n">y</span> <span class="o">+</span> <span class="p">(</span><span class="mi">16</span> <span class="o">*</span> <span class="n">Ysize</span><span class="p">)),</span> <span class="n">BG</span><span class="p">,</span> <span class="n">BF</span>
<span class="n">END</span> <span class="n">IF</span>
<span class="n">FOR</span> <span class="n">character</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">TO</span> <span class="n">L</span>                     <span class="c1">'go through text chars</span>
  <span class="n">tx</span> <span class="o">=</span> <span class="n">ASC</span><span class="p">(</span><span class="n">MID</span><span class="err">$</span><span class="p">(</span><span class="n">text$</span><span class="p">,</span> <span class="n">character</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>      <span class="c1">'get ASCII value</span>
  <span class="n">FOR</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">15</span>                          <span class="c1">'current row of 16</span>
    <span class="n">FOR</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">7</span> <span class="c1">'                       'cycle through 8 bit values</span>
      <span class="n">IF</span> <span class="n">ASC</span><span class="p">(</span><span class="kt">Char</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span> <span class="n">AND</span> <span class="mi">2</span> <span class="o">^</span> <span class="n">c</span> <span class="n">THEN</span>      <span class="c1">'if bit is on</span>
        <span class="n">LINE</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">Xsize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">Ysize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">FG</span><span class="p">,</span> <span class="n">BF</span>
      <span class="n">END</span> <span class="n">IF</span>  <span class="c1">'adapted from code by TerryRitchie @ www.QB64.net</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">Xsize</span>                        <span class="c1">'move x position</span>
    <span class="n">NEXT</span> <span class="n">c</span>                                 <span class="c1">'next bit</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">Ysize</span>                          <span class="c1">'move y position</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">Xpos</span>                               <span class="c1">'reset column position</span>
  <span class="n">NEXT</span> <span class="n">r</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">Ypos</span>                                 <span class="c1">'reset y position</span>
  <span class="n">Xpos</span> <span class="o">=</span> <span class="n">Xpos</span> <span class="o">+</span> <span class="n">Xoff</span>                       <span class="c1">'set to next character column</span>
<span class="n">NEXT</span> <span class="n">character</span>                             <span class="c1">'next character</span>
<span class="n">END</span> <span class="n">SUB</span> 

</code></pre></div></div>
<p><sub>Adapted from code by Terry Ritchie</sub></p>

<blockquote>
  <p><strong>NOTE: This procedure requires Char <a href="STRING.html">STRING</a> array data created by the TextSave <a href="SUB.html">SUB</a> from above to be run first!</strong></p>
</blockquote>

<blockquote>
  <ul>
    <li><em>Xpos</em> and <em>Ypos</em> parameters set the top left graphic start position coordinate of the text string. <a href="LOCATE.html">LOCATE</a> cannot be used.</li>
    <li><em>FG</em> and <em>BG</em> determine the text foreground and background colors respectively. If BG is 0, then no background color is used.</li>
    <li><em>Xsize</em> and <em>Ysize</em> determines the size multiple increase of the letters. One is normal size, two is double size etc.</li>
    <li><em>text$</em> is the text <a href="STRING.html">STRING</a> that is to be printed. There will not be an error or screen roll if text goes out of the screen area!</li>
  </ul>
</blockquote>

<h2 id="font-and-unicode-conversion">Font and Unicode Conversion</h2>

<p>To convert different sized <a href="_FONT.html">_FONT</a> or <a href="Unicode.html">Unicode</a> characters, first determine the text block size to find how much data is required:</p>

<div class="language-vb highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                           <span class="c1">'Code must be run in QB64 ONLY! </span>
<span class="n">DEFINT</span> <span class="n">A</span><span class="o">-</span><span class="n">Z</span>
<span class="n">DIM</span> <span class="n">SHARED</span> <span class="n">high%</span>  <span class="c1">'value is shared with both SUB procedures!</span>
<span class="n">DO</span>
  <span class="n">INPUT</span> <span class="s">"Enter Screen mode 1, 2 or 7 to 13 or 256 for _NEWIMAGE: "</span><span class="p">,</span> <span class="n">scr$</span>
  <span class="n">mode%</span> <span class="o">=</span> <span class="n">VAL</span><span class="p">(</span><span class="n">scr$</span><span class="p">)</span>
<span class="n">LOOP</span> <span class="n">UNTIL</span> <span class="n">mode%</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="n">SELECT</span> <span class="n">CASE</span> <span class="n">mode%</span>
  <span class="n">CASE</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span> <span class="n">TO</span> <span class="mi">13</span><span class="p">:</span> <span class="n">SCREEN</span> <span class="n">mode%</span>
  <span class="n">CASE</span> <span class="mi">256</span><span class="p">:</span> <span class="n">SCREEN</span> <span class="n">_NEWIMAGE</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="n">mode%</span><span class="p">)</span>
  <span class="n">CASE</span> <span class="n">ELSE</span><span class="p">:</span> <span class="n">PRINT</span> <span class="s">"Invalid screen mode selected!"</span><span class="p">:</span> <span class="n">END</span>
<span class="n">END</span> <span class="n">SELECT</span>

<span class="n">INPUT</span> <span class="s">"Enter first name of TTF font to use or hit Enter for block size: "</span><span class="p">,</span> <span class="n">TTFont</span><span class="err">$</span>
<span class="n">IF</span> <span class="n">LEN</span><span class="p">(</span><span class="n">TTFont</span><span class="err">$</span><span class="p">)</span> <span class="n">THEN</span> <span class="n">INPUT</span> <span class="s">"Enter font height: "</span><span class="p">,</span> <span class="n">hi$</span>
<span class="n">height%</span> <span class="o">=</span> <span class="n">VAL</span><span class="p">(</span><span class="n">hi$</span><span class="p">)</span>
<span class="n">IF</span> <span class="n">height%</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="n">THEN</span>
  <span class="n">fnt&amp;</span> <span class="o">=</span> <span class="n">_LOADFONT</span><span class="p">(</span><span class="s">"C:\Windows\Fonts\"</span> <span class="o">+</span> <span class="n">TTFont</span><span class="err">$</span> <span class="o">+</span> <span class="s">".ttf"</span><span class="p">,</span> <span class="n">height%</span><span class="p">,</span> <span class="n">style$</span><span class="p">)</span>
  <span class="n">IF</span> <span class="n">fnt&amp;</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="n">THEN</span> <span class="n">PRINT</span> <span class="s">"Invalid Font handle!"</span><span class="p">:</span> <span class="n">END</span>
  <span class="n">_FONT</span> <span class="n">fnt&amp;</span>
<span class="n">END</span> <span class="n">IF</span>

  <span class="c1">'add Unicode Code Page data using _MAPUNICODE here:</span>

<span class="n">high%</span> <span class="o">=</span> <span class="n">_FONTHEIGHT</span><span class="p">:</span> <span class="n">wid%</span> <span class="o">=</span> <span class="n">_PRINTWIDTH</span><span class="p">(</span><span class="s">"W"</span><span class="p">)</span>
<span class="n">DIM</span> <span class="n">SHARED</span> <span class="kt">Char</span><span class="p">(</span><span class="mi">0</span> <span class="n">TO</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span> <span class="n">TO</span> <span class="n">high%</span><span class="p">)</span> <span class="n">AS</span> <span class="n">INTEGER</span> <span class="c1">'size for integer MKI$ strings up to 16 wide</span>
<span class="n">TextSave</span> <span class="c1">'create character pixel data</span>

<span class="n">DisplayText</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">"This is a graphic test of font!"</span>

<span class="n">_PRINTSTRING</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">120</span><span class="p">),</span> <span class="s">"Actual text or font size ="</span> <span class="o">+</span> <span class="n">STR</span><span class="err">$</span><span class="p">(</span><span class="n">wid%</span><span class="p">)</span> <span class="o">+</span> <span class="s">" X"</span> <span class="o">+</span> <span class="n">STR</span><span class="err">$</span><span class="p">(</span><span class="n">high%</span><span class="p">)</span>

<span class="kt">Char</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">=</span> <span class="n">high%</span>  <span class="c1">'place font height at start of array and file. Other dimension always 255</span>
<span class="n">ff</span> <span class="o">=</span> <span class="n">FREEFILE</span>
<span class="n">OPEN</span> <span class="s">"FontText.bin"</span> <span class="n">FOR</span> <span class="n">OUTPUT</span> <span class="n">AS</span> <span class="p">#</span><span class="n">ff</span> <span class="c1">'erase previous data</span>
<span class="n">CLOSE</span> <span class="p">#</span><span class="n">ff</span>
<span class="n">OPEN</span> <span class="s">"FontText.bin"</span> <span class="n">FOR</span> <span class="n">BINARY</span> <span class="n">AS</span> <span class="p">#</span><span class="n">ff</span>
<span class="n">PUT</span> <span class="p">#</span><span class="n">ff</span><span class="p">,</span> <span class="p">,</span> <span class="kt">Char</span><span class="p">()</span>                <span class="c1">'PUT the entire array into a BINARY file</span>
<span class="n">CLOSE</span> <span class="p">#</span><span class="n">ff</span>

<span class="n">END</span>

<span class="n">SUB</span> <span class="n">DisplayText</span> <span class="p">(</span><span class="n">Xpos</span><span class="p">,</span> <span class="n">Ypos</span><span class="p">,</span> <span class="n">FG</span><span class="p">,</span> <span class="n">Xsize</span><span class="p">,</span> <span class="n">Ysize</span><span class="p">,</span> <span class="n">text$</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">Xpos</span><span class="p">:</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Ypos</span><span class="p">:</span> <span class="n">L</span> <span class="o">=</span> <span class="n">LEN</span><span class="p">(</span><span class="n">text$</span><span class="p">)</span>
<span class="n">FOR</span> <span class="n">character</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">TO</span> <span class="n">L</span> <span class="c1">'go through text chars</span>
  <span class="n">tx</span> <span class="o">=</span> <span class="n">ASC</span><span class="p">(</span><span class="n">MID</span><span class="err">$</span><span class="p">(</span><span class="n">text$</span><span class="p">,</span> <span class="n">character</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>               <span class="c1">'get each letter's ASCII value</span>
  <span class="n">wide%</span> <span class="o">=</span> <span class="kt">Char</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">high%</span><span class="p">):</span> <span class="n">Xoff</span> <span class="o">=</span> <span class="n">wide%</span> <span class="o">*</span> <span class="n">Xsize</span>     <span class="c1">'get font width from high row</span>
  <span class="n">FOR</span> <span class="n">r%</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="n">high%</span> <span class="o">-</span> <span class="mi">1</span>                           <span class="c1">'current row value</span>
    <span class="n">value%</span> <span class="o">=</span> <span class="kt">Char</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">r%</span><span class="p">)</span>                           <span class="c1">'row byte value</span>
    <span class="n">FOR</span> <span class="n">c%</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="n">wide%</span> <span class="o">-</span> <span class="mi">1</span>                         <span class="c1">'cycle through bit values</span>
      <span class="n">IF</span> <span class="n">value%</span> <span class="n">AND</span> <span class="mi">2</span> <span class="o">^</span> <span class="n">c%</span> <span class="n">THEN</span> <span class="c1">'if bit is on</span>
        <span class="n">LINE</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">Xsize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">Ysize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">FG</span><span class="p">,</span> <span class="n">BF</span>
      <span class="n">END</span> <span class="n">IF</span>               <span class="c1">'adapted from code by TerryRitchie @ www.QB64.net</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">Xsize</span>                      <span class="c1">'move x position</span>
    <span class="n">NEXT</span> <span class="n">c%</span>                              <span class="c1">'next column bit</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">Ysize</span>                        <span class="c1">'move y position</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">Xpos</span>                             <span class="c1">'reset column position</span>
  <span class="n">NEXT</span> <span class="n">r%</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">Ypos</span>                               <span class="c1">'reset y position</span>
  <span class="n">Xpos</span> <span class="o">=</span> <span class="n">Xpos</span> <span class="o">+</span> <span class="n">Xoff</span>                     <span class="c1">'set to next character column</span>
<span class="n">NEXT</span> <span class="n">character</span>
<span class="n">END</span> <span class="n">SUB</span>

<span class="n">SUB</span> <span class="n">TextSave</span>
<span class="n">OUT</span> <span class="o">&amp;</span><span class="n">H3C8</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="n">OUT</span> <span class="o">&amp;</span><span class="n">H3C9</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="n">OUT</span> <span class="o">&amp;</span><span class="n">H3C9</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="n">OUT</span> <span class="o">&amp;</span><span class="n">H3C9</span><span class="p">,</span> <span class="mi">0</span> <span class="c1">'print text as background color</span>
<span class="n">FOR</span> <span class="n">ascii%</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">255</span> <span class="c1">'Draw map of each character</span>
  <span class="n">CLS</span>
  <span class="n">_PRINTSTRING</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">CHR</span><span class="err">$</span><span class="p">(</span><span class="n">ascii%</span><span class="p">)</span> <span class="c1">'PRINT ASCII characters to top left corner</span>
  <span class="n">wide%</span> <span class="o">=</span> <span class="n">_PRINTWIDTH</span><span class="p">(</span><span class="n">CHR</span><span class="err">$</span><span class="p">(</span><span class="n">ascii%</span><span class="p">))</span>
  <span class="n">FOR</span> <span class="n">row%</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="n">high%</span> <span class="o">-</span> <span class="mi">1</span> <span class="c1">'read row byte values</span>
    <span class="n">byte%</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">'reset value every row</span>
    <span class="n">FOR</span> <span class="n">col%</span> <span class="o">=</span> <span class="n">wide%</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">TO</span> <span class="mi">0</span> <span class="n">STEP</span> <span class="o">-</span><span class="mi">1</span> <span class="c1">'read pixels from right to left</span>
      <span class="n">byte%</span> <span class="o">=</span> <span class="n">byte%</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="n">POINT</span><span class="p">(</span><span class="n">col%</span><span class="p">,</span> <span class="n">row%</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">'bit-packing with 2 ^ bit</span>
    <span class="n">NEXT</span>
    <span class="kt">Char</span><span class="p">(</span><span class="n">ascii%</span><span class="p">,</span> <span class="n">row%</span><span class="p">)</span> <span class="o">=</span> <span class="n">byte%</span> <span class="c1">'convert row byte value to 2 byte MKI$ character</span>
  <span class="n">NEXT</span>
  <span class="kt">Char</span><span class="p">(</span><span class="n">ascii%</span><span class="p">,</span> <span class="n">high%</span><span class="p">)</span> <span class="o">=</span> <span class="n">wide%</span>  <span class="c1">'place individual font widths into array high row</span>
<span class="n">NEXT</span>
<span class="n">PALETTE</span> <span class="c1">'restore all palette colors</span>
<span class="n">END</span> <span class="n">SUB</span> 

</code></pre></div></div>
<p><sub>Code by Ted Weissgerber</sub></p>

<blockquote>
  <p><em>Explanation:</em> <a href="_PRINTWIDTH.html">_PRINTWIDTH</a> can read the pixel width of one character and can be used to measure non-monospace fonts.</p>
</blockquote>

<blockquote>
  <p>If the character width is wider than 8 pixels, we can no longer store the exponent of two values in one <a href="_BYTE.html">_BYTE</a> or represent that byte as an <a href="ASCII.html">ASCII</a> character so we can use an <a href="INTEGER.html">INTEGER</a> or <a href="LONG.html">LONG</a> array to hold the values, which can be saved to file with <a href="PUT.html">PUT</a>.</p>
</blockquote>

<p><strong>Variable font widths</strong></p>

<blockquote>
  <p>Some fonts vary in width for every character so we can store <em>wide&amp;</em> as a <a href="HEX%24.html">HEX$</a> value in the <em>high&amp;</em> array row value as we use 0 through <em>high&amp;</em> - 1 to store the bit totals. Save the  <em>high&amp;</em> <a href="_FONTHEIGHT.html">_FONTHEIGHT</a> value for the sub-procedures and to dimension an array!</p>
</blockquote>

<blockquote>
  <p><strong>This allows the use of DisplayText <a href="SUB.html">SUB</a> in a QBasic program to read the data when you save the array data to a file.</strong></p>
</blockquote>

<h2 id="reading-the-data-file">Reading the Data File</h2>

<p><strong>Reading the file data in a QB64 program only</strong></p>

<div class="language-vb highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">DEFINT</span> <span class="n">A</span><span class="o">-</span><span class="n">Z</span>
<span class="n">DIM</span> <span class="n">SHARED</span> <span class="n">high%</span> <span class="c1">'must share with DisplayText SUB!</span>
<span class="n">SCREEN</span> <span class="n">_NEWIMAGE</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">256</span><span class="p">)</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">FREEFILE</span>
<span class="n">OPEN</span> <span class="s">"FontText.bin"</span> <span class="n">FOR</span> <span class="n">BINARY</span> <span class="n">AS</span> <span class="p">#</span><span class="n">f</span>
<span class="n">GET</span> <span class="p">#</span><span class="n">f</span><span class="p">,</span> <span class="p">,</span> <span class="n">high%</span>   <span class="c1">'GET the first integer value as the second array dimension</span>
<span class="n">SEEK</span> <span class="p">#</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span>        <span class="c1">'SEEK moves back to the beginning of the file</span>
<span class="n">PRINT</span> <span class="n">high%</span>
<span class="n">REDIM</span> <span class="n">SHARED</span> <span class="kt">Char</span><span class="p">(</span><span class="mi">0</span> <span class="n">TO</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span> <span class="n">TO</span> <span class="n">high%</span><span class="p">)</span> <span class="n">AS</span> <span class="n">INTEGER</span>  <span class="c1">'Dynamic array</span>
<span class="n">GET</span> <span class="p">#</span><span class="n">f</span><span class="p">,</span> <span class="p">,</span> <span class="kt">Char</span><span class="p">()</span>  <span class="c1">'one GET moves all of the data back to the array once it is sized correctly</span>
<span class="n">CLOSE</span> <span class="p">#</span><span class="n">f</span>
<span class="kt">Char</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">DisplayText</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">"This is the font from the BIN file!"</span>

<span class="n">END</span>

<span class="n">SUB</span> <span class="n">DisplayText</span> <span class="p">(</span><span class="n">Xpos</span><span class="p">,</span> <span class="n">Ypos</span><span class="p">,</span> <span class="n">FG</span><span class="p">,</span> <span class="n">Xsize</span><span class="p">,</span> <span class="n">Ysize</span><span class="p">,</span> <span class="n">text$</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">Xpos</span><span class="p">:</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Ypos</span><span class="p">:</span> <span class="n">L</span> <span class="o">=</span> <span class="n">LEN</span><span class="p">(</span><span class="n">text$</span><span class="p">)</span>
<span class="n">FOR</span> <span class="n">character</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">TO</span> <span class="n">L</span>                              <span class="c1">'go through text chars</span>
  <span class="n">tx</span> <span class="o">=</span> <span class="n">ASC</span><span class="p">(</span><span class="n">MID</span><span class="err">$</span><span class="p">(</span><span class="n">text$</span><span class="p">,</span> <span class="n">character</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>               <span class="c1">'get ASCII value</span>
  <span class="n">wide%</span> <span class="o">=</span> <span class="kt">Char</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">high%</span><span class="p">):</span> <span class="n">Xoff</span> <span class="o">=</span> <span class="n">wide%</span> <span class="o">*</span> <span class="n">Xsize</span>     <span class="c1">'read variable font widths</span>
  <span class="n">FOR</span> <span class="n">r%</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="n">high%</span> <span class="o">-</span> <span class="mi">1</span>           <span class="c1">'current row value</span>
    <span class="n">value%</span> <span class="o">=</span> <span class="kt">Char</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">r%</span><span class="p">)</span>
    <span class="n">FOR</span> <span class="n">c%</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="n">wide%</span> <span class="o">-</span> <span class="mi">1</span>        <span class="c1">'cycle through bit values</span>
      <span class="n">IF</span> <span class="n">value%</span> <span class="n">AND</span> <span class="mi">2</span> <span class="o">^</span> <span class="n">c%</span> <span class="n">THEN</span> <span class="c1">'if bit is on</span>
        <span class="n">LINE</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">Xsize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">Ysize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">FG</span><span class="p">,</span> <span class="n">BF</span>
      <span class="n">END</span> <span class="n">IF</span>                <span class="c1">'adapted from code by TerryRitchie @ www.QB64.net</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">Xsize</span>                <span class="c1">'move x position</span>
    <span class="n">NEXT</span> <span class="n">c%</span>                        <span class="c1">'next bit</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">Ysize</span>                  <span class="c1">'move y position</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">Xpos</span>                       <span class="c1">'reset column position</span>
  <span class="n">NEXT</span> <span class="n">r%</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">Ypos</span>                         <span class="c1">'reset y position</span>
  <span class="n">Xpos</span> <span class="o">=</span> <span class="n">Xpos</span> <span class="o">+</span> <span class="n">Xoff</span>               <span class="c1">'set to next character column</span>
<span class="n">NEXT</span> <span class="n">character</span>
<span class="n">END</span> <span class="n">SUB</span> 

</code></pre></div></div>

<p><em>Note:</em> Use empty parenthesis after the <a href="Arrays.html">Arrays</a> name to <a href="PUT.html">PUT</a> # or <a href="GET.html">GET</a> # the entire array, even multi-dimensional ones.</p>

<p><strong>Reading the file data in a QBasic or QB64 program</strong></p>

<div class="language-vb highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">DEFINT</span> <span class="n">A</span><span class="o">-</span><span class="n">Z</span>
<span class="n">SCREEN</span> <span class="mi">12</span>
<span class="n">DIM</span> <span class="n">SHARED</span> <span class="n">high%</span> <span class="c1">'must share with DisplayText SUB!</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">FREEFILE</span>
<span class="n">OPEN</span> <span class="s">"FontText.bin"</span> <span class="n">FOR</span> <span class="n">BINARY</span> <span class="n">AS</span> <span class="p">#</span><span class="n">f</span>
<span class="n">GET</span> <span class="p">#</span><span class="n">f</span><span class="p">,</span> <span class="p">,</span> <span class="n">high%</span> <span class="c1">'GET the first integer value as the second array dimension</span>

<span class="n">REDIM</span> <span class="n">SHARED</span> <span class="kt">Char</span><span class="p">(</span><span class="mi">0</span> <span class="n">TO</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span> <span class="n">TO</span> <span class="n">high%</span><span class="p">)</span> <span class="n">AS</span> <span class="n">INTEGER</span>  <span class="c1">'Dynamic array</span>
<span class="n">ReadData</span> <span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">DisplayText</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">"This is the font from the BIN file!"</span>

<span class="n">END</span>

<span class="n">SUB</span> <span class="n">ReadData</span> <span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">SEEK</span> <span class="p">#</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span>                <span class="c1">'SEEK moves back to the beginning of the file</span>
<span class="n">PRINT</span> <span class="n">high%</span>
<span class="n">DO</span>
  <span class="n">FOR</span> <span class="n">row</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="n">high%</span>    <span class="c1">'read each row as a group of 256 values</span>
    <span class="n">FOR</span> <span class="n">code</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">255</span>   <span class="c1">'read the row value for each character</span>
      <span class="n">GET</span> <span class="p">#</span><span class="n">f</span><span class="p">,</span> <span class="p">,</span> <span class="n">valu%</span>
      <span class="n">IF</span> <span class="n">EOF</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="n">THEN</span> <span class="n">EXIT</span> <span class="n">DO</span> <span class="c1">'prevents bad data</span>
      <span class="kt">Char</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="o">=</span> <span class="n">valu%</span>
  <span class="n">NEXT</span><span class="p">:</span> <span class="n">NEXT</span>
<span class="n">LOOP</span> <span class="n">UNTIL</span> <span class="mi">1</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">'one time DO loop if End Of File</span>
<span class="n">CLOSE</span> <span class="p">#</span><span class="n">f</span>
<span class="kt">Char</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span>          <span class="c1">'remove the high% value from CHR$(0) array data</span>
<span class="n">END</span> <span class="n">SUB</span>

<span class="n">SUB</span> <span class="n">DisplayText</span> <span class="p">(</span><span class="n">Xpos</span><span class="p">,</span> <span class="n">Ypos</span><span class="p">,</span> <span class="n">FG</span><span class="p">,</span> <span class="n">Xsize</span><span class="p">,</span> <span class="n">Ysize</span><span class="p">,</span> <span class="n">text$</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">Xpos</span><span class="p">:</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Ypos</span><span class="p">:</span> <span class="n">L</span> <span class="o">=</span> <span class="n">LEN</span><span class="p">(</span><span class="n">text$</span><span class="p">)</span>
<span class="n">FOR</span> <span class="n">character</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">TO</span> <span class="n">L</span>                                    <span class="c1">'go through text chars</span>
  <span class="n">tx</span> <span class="o">=</span> <span class="n">ASC</span><span class="p">(</span><span class="n">MID</span><span class="err">$</span><span class="p">(</span><span class="n">text$</span><span class="p">,</span> <span class="n">character</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>                     <span class="c1">'get ASCII value</span>
  <span class="n">wide%</span> <span class="o">=</span> <span class="kt">Char</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">high%</span><span class="p">):</span> <span class="n">Xoff</span> <span class="o">=</span> <span class="n">wide%</span> <span class="o">*</span> <span class="n">Xsize</span>           <span class="c1">'read variable font widths</span>
  <span class="n">FOR</span> <span class="n">r%</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="n">high%</span> <span class="o">-</span> <span class="mi">1</span>                                 <span class="c1">'current row value</span>
    <span class="n">value%</span> <span class="o">=</span> <span class="kt">Char</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">r%</span><span class="p">)</span>
    <span class="n">FOR</span> <span class="n">c%</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">TO</span> <span class="n">wide%</span> <span class="o">-</span> <span class="mi">1</span> <span class="c1">'cycle through bit values</span>
      <span class="n">IF</span> <span class="n">value%</span> <span class="n">AND</span> <span class="mi">2</span> <span class="o">^</span> <span class="n">c%</span> <span class="n">THEN</span> <span class="c1">'if bit is on</span>
        <span class="n">LINE</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">Xsize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">Ysize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">FG</span><span class="p">,</span> <span class="n">BF</span>
      <span class="n">END</span> <span class="n">IF</span>               <span class="c1">'adapted from code by TerryRitchie @ www.QB64.net</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">Xsize</span>               <span class="c1">'move x position</span>
    <span class="n">NEXT</span> <span class="c1">'next bit</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">Ysize</span> <span class="c1">'move y position</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">Xpos</span> <span class="c1">'reset column position</span>
  <span class="n">NEXT</span> <span class="n">r%</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">Ypos</span> <span class="c1">'reset y position</span>
  <span class="n">Xpos</span> <span class="o">=</span> <span class="n">Xpos</span> <span class="o">+</span> <span class="n">Xoff</span>              <span class="c1">'set to next character column</span>
<span class="n">NEXT</span> <span class="n">character</span>
<span class="n">END</span> <span class="n">SUB</span> 

</code></pre></div></div>

<p>The QB64 <a href="PUT.html">PUT</a> <a href="BINARY.html">BINARY</a> file can be read to the array by reading the row values for all of the characters as above.</p>

<p><strong>The average font file with 256 characters is less than 20 KB in size!</strong></p>

<h2 id="see-also">See Also</h2>

<ul>
  <li><a href="_PRINTSTRING.html">_PRINTSTRING</a>, <a href="_PRINTWIDTH.html">_PRINTWIDTH</a></li>
  <li><a href="_LOADFONT.html">_LOADFONT</a>, <a href="_FONTHEIGHT.html">_FONTHEIGHT</a></li>
  <li><a href="_MAPUNICODE.html">_MAPUNICODE</a>, <a href="_CONTROLCHR.html">_CONTROLCHR</a></li>
  <li><a href="Boolean.html">Boolean</a>, <a href="AND.html">AND</a> (logic operator)</li>
  <li><a href="ASCII.html">ASCII</a>, <a href="Unicode.html">Unicode</a>, <a href="Code-Pages.html">Code Pages</a></li>
</ul>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        
        <p class="copyright">QB64.com maintained by <a href="https://github.com/DualBrain">Cory Smith</a> on <a href="https://github.com/DualBrain/QB64">GitHub</a>.</p>
        
        <p>Published with <a href="https://pages.github.com/">GitHub Pages</a></p>
      </footer>
    </div>
  </body>

<!-- Mirrored from qb64.com/wiki/Text-Using-Graphics.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 07 Nov 2024 13:50:47 GMT -->
</html>